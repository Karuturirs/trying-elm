<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>auto time zone convert</title>
  <link rel="favicon" type="image/png" href="./images/timezone-globe-50.png"  />
  <script type="text/javascript" src="elm.js"></script>
</head>

<body>
	<div id="myapp"></div>
</body>

<script type="text/javascript">

function dateToMillsec( year, month, day, hh, mm)
{
		return (new Date(year, month-1, day, hh, mm)).getTime();
}

customElements.define('time-millisec',
    class extends HTMLElement {
        // things required by Custom Elements
        constructor() { super(); }
        connectedCallback() { this.setTextContent(); }
        attributeChangedCallback() { this.setTextContent(); }
        static get observedAttributes() { return ['id','year', 'month', 'day', 'hh', 'mm']; }

        // Our function to set the textContent based on attributes.
        setTextContent()
        {
            const id = this.getAttribute('id')
            const year = this.getAttribute('year');
            const month = this.getAttribute('month');
            const day = this.getAttribute('day');
            const hh = this.getAttribute('hh');
            const mm = this.getAttribute('mm');
            this.textContent = dateToMillsec(year, month, day, hh, mm);
        }
    }
);

function millsecToDate(millsec)
{
		return (new Date(millsec));
}

customElements.define('millsec-to-time',
    class extends HTMLElement {
        // things required by Custom Elements
        constructor() { super(); }
        connectedCallback() { this.setTextContent(); }
        attributeChangedCallback() { this.setTextContent(); }
        static get observedAttributes() { return ['millsec']; }

        // Our function to set the textContent based on attributes.
        setTextContent()
        {
            const mill = this.getAttribute('millsec');
            this.textContent = millsecToDate(mill);
        }
    }
);

// Start the Elm application.
var app = Elm.TimeMatcher.init({
	node: document.getElementById('myapp')
});


// If you want to use a JavaScript library to manage your WebSocket
// connection, replace the code in JS with the alternate implementation.
</script>

</html>